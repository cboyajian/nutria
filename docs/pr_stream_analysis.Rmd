---
output: 
  html_document:
    code_folding: hide
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(patchwork)
```

```{r include=FALSE}
list.files(path = "/courses/EDS214/nutria/raw-data")

bq1 <- read_csv("/courses/EDS214/nutria/raw-data/QuebradaCuenca1-Bisley.csv", na = c("-9999", "-9999.00"))
bq2 <- read_csv("/courses/EDS214/nutria/raw-data/QuebradaCuenca2-Bisley.csv", na = c("-9999", "-9999.00")) %>% 
  separate(col = Sample_Date, into = c("Sample_Date", "time"), sep = " ") %>% 
  select(-time)
bq3 <- read_csv("/courses/EDS214/nutria/raw-data/QuebradaCuenca3-Bisley.csv", na = c("-9999", "-9999.00"))
prm <- read_csv("/courses/EDS214/nutria/raw-data/RioMameyesPuenteRoto.csv", na = c("-9999", "-9999.00"))

stream_data <- rbind(bq1, bq2, bq3, prm) %>% 
  clean_names() %>% 
  select(sample_id, sample_date, no3, k) %>% 
  mutate(sample_date = mdy(sample_date))
```

```{r}
k <- ggplot(data = stream_data, aes(x = sample_date, y = k / 2, color = sample_id)) +
  geom_vline(xintercept = as.Date("1989-10-01"), linetype = "dashed") +
  geom_line(aes(linetype = sample_id)) +
  scale_color_viridis_d() +
  scale_x_date(limits = c(as.Date("1988-01-01"), as.Date("1994-07-01"))) +
  labs(x = NULL, y = "K mg l\u207b\u00b9", color = 'Site', linetype = "Site") +
  theme_classic() +
  theme(axis.text.x = element_blank())
```

```{r}
n <- ggplot(data = stream_data, aes(x = sample_date, y = no3 / 3, color = sample_id)) +
  geom_vline(xintercept = as.Date("1989-10-01"), linetype = "dashed") +
  geom_line(aes(linetype = sample_id)) +
  scale_color_viridis_d() +
  scale_x_date(limits = c(as.Date("1988-01-01"), as.Date("1994-07-01"))) +
  # scale_y_continuous(limits = c(NA, 500)) +
  labs(x = "Date", y = "NO\u2083 -N\u00b5l\u207b\u00b9", color = 'Site', linetype = "Site") +
  theme_classic() +
  theme(legend.position = "none")
```

```{r}
k / n
```




